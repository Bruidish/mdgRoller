'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var MdgRoller=function(){function a(b){return(_classCallCheck(this,a),this.initOptions(),'undefined'==typeof b.mainWrap||'undefined'==typeof b.collectionWrap)?null:(this.$mainWrap=document.querySelector(b.mainWrap),!this.$mainWrap)?null:(this.$collectionWrap=this.$mainWrap.querySelector(b.collectionWrap),!this.$collectionWrap)?null:(this.setOptions(b),this.renderCollection(),this.eventsCollection(),'undefined'!=typeof b.scrollBarWrap&&'undefined'!=typeof b.scrollBarHandler&&(this.$scrollBarWrap=this.$mainWrap.querySelector(b.scrollBarWrap),this.$scrollBarHandler=this.$mainWrap.querySelector(b.scrollBarHandler),this.$scrollBarWrap&&this.$scrollBarHandler&&(this.scrollBarExists=!0,this.renderScrollBar(),this.eventsScrollBar())),'undefined'!=typeof b.buttonLeft&&'undefined'!=typeof b.buttonRight&&(this.$buttonLeft=this.$mainWrap.querySelector(b.buttonLeft),this.$buttonRight=this.$mainWrap.querySelector(b.buttonRight),this.$buttonLeft&&this.$buttonRight&&(this.buttonExists=!0,this.renderButtons(),this.eventsButtons())),this.events(),this)}return _createClass(a,[{key:'initOptions',value:function a(){this.$mainWrap=null,this.$collectionWrap=null,this.scrollBarExists=!1,this.$scrollBarWrap=null,this.$scrollBarHandler=null,this.buttonExists=!1,this.$buttonLeft=null,this.$buttonRight=null,this.buttonScroll=300,this.collectionCount=0,this.collectionViewportDelta=0,this.css={paddingX:0}}},{key:'setOptions',value:function b(a){'undefined'!=typeof a.buttonScroll&&(this.buttonScroll=a.buttonScroll),'undefined'!=typeof a.css&&'undefined'!=typeof a.css.paddingX&&(this.css.paddingX=a.css.paddingX)}},{key:'renderCollection',value:function a(){if(this.css.paddingX){var b=document.createElement('li');b.style.width=this.css.paddingX+'px',this.$collectionWrap.appendChild(b),this.$collectionWrap.style.paddingLeft=this.css.paddingX+'px'}this.collectionCount=this.$collectionWrap.childElementCount,this.$collectionWrap.style.gridTemplateColumns='repeat('+this.collectionCount+', auto)'}},{key:'renderScrollBar',value:function b(){this.collectionViewportDelta=100*(this.$collectionWrap.clientWidth/this.$collectionWrap.scrollWidth),this.$scrollBarWrap.style.paddingLeft=this.css.paddingX+'px',this.$scrollBarWrap.style.paddingRight=this.css.paddingX+'px';var a=this.$scrollBarWrap.clientWidth*this.collectionViewportDelta/100-2*this.css.paddingX;this.$scrollBarHandler.style.width=a+'px',this.$scrollBarWrap.classList.toggle('isInactive',100==this.collectionViewportDelta||20>=a)}},{key:'moveScrollBarHandler',value:function a(){this.$scrollBarHandler.style.marginLeft=this.$collectionWrap.parentNode.scrollLeft*this.collectionViewportDelta/100+'px'}},{key:'eventsCollection',value:function b(){var a=this;this.$collectionWrap.parentNode.addEventListener('scroll',function(){a.moveScrollBarHandler(),a.renderButtons()})}},{key:'eventsScrollBar',value:function b(){var a=this;this.$scrollBarHandler.addEventListener('mousedown',function(b){function c(a){var b=Math.ceil;0<a.clientX&&(d.$collectionWrap.parentNode.scrollLeft=b(100*((a.clientX-e)/d.collectionViewportDelta)))}var d=a,e=b.clientX-parseInt(a.$scrollBarHandler.style.marginLeft);a.$collectionWrap.parentNode.style.scrollBehavior='inherit',a.$scrollBarHandler.classList.add('focus'),window.addEventListener('mousemove',c),window.addEventListener('mouseup',function(){window.removeEventListener('mousemove',c),a.$collectionWrap.parentNode.style.scrollBehavior='smooth',a.$scrollBarHandler.classList.remove('focus')})})}},{key:'renderButtons',value:function a(){this.$buttonLeft.style.left=this.css.paddingX+'px',this.$buttonRight.style.right=this.css.paddingX+'px',this.$buttonLeft.classList.toggle('o-none',30>=this.$collectionWrap.parentNode.scrollLeft),this.$buttonRight.classList.toggle('o-none',this.$collectionWrap.parentNode.scrollLeft>=this.$collectionWrap.scrollWidth-this.$collectionWrap.clientWidth-30)}},{key:'eventsButtons',value:function b(){var a=this;this.$buttonLeft.addEventListener('mouseup',function(){return a.$collectionWrap.parentNode.scrollLeft-=a.buttonScroll}),this.$buttonRight.addEventListener('mouseup',function(){return a.$collectionWrap.parentNode.scrollLeft+=a.buttonScroll})}},{key:'events',value:function b(){var a=this;window.addEventListener('resize',function(){a.scrollBarExists&&(a.renderScrollBar(),a.moveScrollBarHandler())})}}]),a}();
