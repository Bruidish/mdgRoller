'use strict';var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var MdgRollerCounter=0,MdgRoller=function(){function a(b){return(_classCallCheck(this,a),MdgRollerCounter++,this.id=MdgRollerCounter,this._params=b,this.initOptions(),this.setParams(b),!b.mainWrap||!b.collectionWrap)?null:(this.$mainWrap=document.querySelector(b.mainWrap),!this.$mainWrap)?null:(this.$collectionWrap=this.$mainWrap.querySelector(b.collectionWrap),!this.$collectionWrap)?null:(this.renderCollection(!0),b.scrollBarWrap&&b.scrollBarHandler&&(this.$scrollBarWrap=this.$mainWrap.querySelector(b.scrollBarWrap),this.$scrollBarHandler=this.$mainWrap.querySelector(b.scrollBarHandler),this.$scrollBarWrap&&this.$scrollBarHandler&&(this.scrollBarExists=!0)),b.buttonLeft&&b.buttonRight&&(this.$buttonLeft=this.$mainWrap.querySelector(b.buttonLeft),this.$buttonRight=this.$mainWrap.querySelector(b.buttonRight),this.$buttonLeft&&this.$buttonRight&&(this.buttonExists=!0)),this.eventsCollection(),this.events(),this)}return _createClass(a,[{key:'initOptions',value:function a(){this.resizeTicker=null,this.$mainWrap=null,this.$collectionWrap=null,this.scrollBarExists=!1,this.$scrollBarWrap=null,this.$scrollBarHandler=null,this.buttonExists=!1,this.$buttonLeft=null,this.$buttonRight=null,this.buttonScroll=300,this.collectionCount=0,this.collectionViewportDelta=0,this.css={paddingX:0}}},{key:'setParams',value:function j(a){if(a.mainWrap=a.mainWrap||null,a.collectionWrap=a.collectionWrap||null,a.scrollBarWrap=a.scrollBarWrap||null,a.scrollBarHandler=a.scrollBarHandler||null,a.buttonLeft=a.buttonLeft||null,a.buttonScroll=a.buttonScroll||null,'undefined'!=typeof a.css&&(this.css.paddingX='undefined'==typeof a.css.paddingX?this.css.paddingX:a.css.paddingX,'undefined'!=typeof a.css.breakpoints)){var b=!0,c=!1,d=void 0;try{for(var e,f=Object.entries(a.css.breakpoints)[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=_slicedToArray(e.value,2),h=g[0],i=g[1];h>=document.body.clientWidth&&(this.css.paddingX='undefined'==typeof i.paddingX?this.css.paddingX:i.paddingX)}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}}},{key:'renderCollection',value:function d(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],b=document.getElementById(this.id+'-ghost-element');if(b&&!this.css.paddingX&&b.remove(),this.css.paddingX)if(b)b.style.width=this.css.paddingX+'px';else{var e=document.createElement('li');e.style.width=this.css.paddingX+'px',e.setAttribute('id',this.id+'-ghost-element'),this.$collectionWrap.appendChild(e)}this.$collectionWrap.style.paddingLeft=this.css.paddingX+'px';var c='';[].concat(_toConsumableArray(this.$collectionWrap.querySelectorAll('li'))).forEach(function(a){c+='undefined'==typeof a.dataset.width?' '+a.offsetWidth+'px':' '+a.dataset.width}),this.collectionCount=this.$collectionWrap.childElementCount,this.$collectionWrap.style.gridTemplateColumns=c,this.$collectionWrap.style.width='unset',this.$collectionWrap.clientWidth>=this.$collectionWrap.scrollWidth&&(this.$collectionWrap.style.width='max-content')}},{key:'renderScrollBar',value:function b(){this.collectionViewportDelta=100*(this.$collectionWrap.clientWidth/this.$collectionWrap.scrollWidth),this.$scrollBarWrap.style.opacity=1,this.$scrollBarWrap.style.paddingLeft=this.css.paddingX+'px',this.$scrollBarWrap.style.paddingRight=this.css.paddingX+'px';var a=this.$scrollBarWrap.clientWidth*this.collectionViewportDelta/100-2*this.css.paddingX;this.$scrollBarHandler.style.width=a+'px',this.$scrollBarWrap.classList.toggle('isInactive',100==this.collectionViewportDelta||20>=a)}},{key:'moveScrollBarHandler',value:function a(){this.$scrollBarHandler.style.marginLeft=this.$collectionWrap.parentNode.scrollLeft*this.collectionViewportDelta/100+'px'}},{key:'eventsScrollBar',value:function b(){var a=this;this.$scrollBarHandler.addEventListener('mousedown',function(b){function c(a){var b=Math.ceil;0<a.clientX&&(d.$collectionWrap.parentNode.scrollLeft=b(100*((a.clientX-e)/d.collectionViewportDelta)))}var d=a,e=b.clientX-parseInt(a.$scrollBarHandler.style.marginLeft);a.$collectionWrap.parentNode.style.scrollBehavior='inherit',a.$scrollBarHandler.classList.add('focus'),window.addEventListener('mousemove',c),window.addEventListener('mouseup',function(){window.removeEventListener('mousemove',c),a.$collectionWrap.parentNode.style.scrollBehavior='smooth',a.$scrollBarHandler.classList.remove('focus')})})}},{key:'renderButtons',value:function a(){this.$buttonLeft.style.left=this.css.paddingX+'px',this.$buttonRight.style.right=this.css.paddingX+'px',this.$buttonLeft.classList.toggle('o-none',30>=this.$collectionWrap.parentNode.scrollLeft),this.$buttonRight.classList.toggle('o-none',this.$collectionWrap.parentNode.scrollLeft>=this.$collectionWrap.scrollWidth-this.$collectionWrap.clientWidth-30)}},{key:'eventsButtons',value:function b(){var a=this;this.$buttonLeft.addEventListener('mouseup',function(){return a.$collectionWrap.parentNode.scrollLeft-=a.buttonScroll}),this.$buttonRight.addEventListener('mouseup',function(){return a.$collectionWrap.parentNode.scrollLeft+=a.buttonScroll})}},{key:'eventsCollection',value:function b(){var a=this;this.$collectionWrap.parentNode.addEventListener('scroll',function(){a.scrollBarExists?a.moveScrollBarHandler():null,a.buttonExists?a.renderButtons():null})}},{key:'events',value:function b(){var a=this;window.addEventListener('load',function(){a.scrollBarExists?a.renderScrollBar():null,a.scrollBarExists?a.moveScrollBarHandler():null,a.buttonExists?a.renderButtons():null,a.buttonExists?a.eventsButtons():null,a.$mainWrap.style.opacity='unset',a.$mainWrap.style.filter='unset'}),window.addEventListener('resize',function(){clearTimeout(a.resizeTicker),a.$mainWrap.style.filter='blur(3px)',a.resizeTicker=setTimeout(function(){a.setParams(a._params),a.renderCollection(),a.scrollBarExists?a.renderScrollBar():null,a.scrollBarExists?a.moveScrollBarHandler():null,a.$mainWrap.style.filter='unset'},100)})}}]),a}();
